{% extends 'html/base.html' %}

{% block content %}
    <head>
        <style>
            .main_div_h span{
                color: #515562;
                font-style: normal;
                font-weight: 400;
                font-size: 12px;
                margin-bottom: 5px;
            }
            .main_div_h input {
                margin-bottom: 20px;
                padding: 8px 12px 8px 16px;
                border: 1px solid #ADB1BB;
            }
        </style>
    </head>
    <form action="" method="post">
    {% csrf_token %}
<div style="margin: 0 auto;width: auto;max-width: 80vh;display: flex;justify-content: space-evenly;height: auto;background-color: #F7F7FC;;margin-bottom: 50px;flex-direction: row;padding: 20px">
    <div class="main_div_h" style="width: 600px;margin-left: 50px;margin-right: 50px;">
        <div style="display: flex;flex-direction: column">
            <label for="Имя"> <span> Имя</span>

            </label>
            <input required placeholder="Имя" id="base" name="name" type="text">
        </div>
        <div style="display: flex;flex-direction: column">
            <label for="Телефон">
                <span>Телефон</span>
            </label>
            <input required placeholder="+7 228 1337 69" name="phone" id="base" id="phone" type="text" class="tel">
        </div>
        <div style="display: flex;flex-direction: column">
            <label for="E-mail">
                <span>Почта</span>
            </label>
            <input placeholder="jmih@gmail.dog" name="email" type="email">
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <div id="container" style="display: flex;flex-direction: column">
            <label for="Способ получения">
                <span>Способ получения</span>
            </label>
            <div>
                <input name="radio" id="radio1" type="radio" value="1">
                <span>Самовывоз</span>
            </div>

            <div>
                <input name="radio" id="radio2" type="radio" value="2"><span>Мне нужна доставка</span></div>
    {#        <select name="select" id="">#}
    {#            <option value="1"></option>#}
    {#            <option value="2"></option>#}
    {#        </select>#}
        </div>
        <div class="check_radio" id="check_radio" >
            <div style="display: flex;flex-direction: column">
                <label for="Почтовый индекс">
                    <span>Почтовый индекс</span>
                </label>
                <input required placeholder="Почтовый индекс" name="postm" type="text">
                <label for="Населенный пункт">
                    <span>Населенный пункт</span>
                </label>
                <input required placeholder="Населенный пункт" name="City" type="text">
            </div>
        {#    <div style="display: flex;flex-direction: column">#}
        {#        <label for="Населенный пункт">#}
        {##}
        {#        </label>#}
        {#        <input type="text">#}
        {#    </div>#}
            <div style="display: flex;flex-direction: column">
                <label for="Улица">
                    <span>Улица</span>
                </label>
                <input required placeholder="Улица" name="street" type="text">
            </div>
            <div style="display: flex;flex-direction: column">
                <label for="Дом">
                    <span>Дом</span>
                </label>
                <input required placeholder="Дом" name="house" type="text">
                <label for="Квартира/Офис">
                    <span>Квартира/Офис</span>
                </label>
                <input required placeholder="Квартира/Офис" name="apartments" type="text">
            </div>
            <div style="display: flex;flex-direction: column">
                <label for="">
                    <span>Коментарий</span>
                </label>
                <textarea name="comment" id="" cols="30" rows="10"></textarea>
            </div>
        </div>
    </div>
        <div style="width: 250px;height: 250px;border: 1px #CDCFD6 solid;text-align: left;">
            <div style="display: flex;justify-content: space-evenly;flex-direction: column;width: 200px;margin: 0 auto">
                <p style="font-size: 16px">Ваш заказ</p>
                <div style="border-bottom: 1px black solid;border-top: 1px black solid;padding-top: 10px;padding-bottom: 10px;">
                    <div style="display:flex;justify-content: space-between"><span>Кол-во товаров: </span> <span>{{ total_counter }}</span></div>
                    <p>Сумма: {{ total_price }}</p>
                </div>
                <p>Итого {{ total_price }}</p>
            </div>
             <button type="submit" style="width: 100%;height: 50px;background-color: #616575;color: white;display: flex;justify-content: center;text-align: center;text-decoration: underline;align-self: end;align-items: center">ОФОРМИТЬ ЗАКАЗ</button>
        </div>
</div>
</form>


    <script>
    window.addEventListener("DOMContentLoaded", function() {
    [].forEach.call( document.querySelectorAll('.tel'), function(input) {
    var keyCode;
    function mask(event) {
        event.keyCode && (keyCode = event.keyCode);
        var pos = this.selectionStart;
        if (pos < 3) event.preventDefault();
        var matrix = "+7 (___) ___ ____",
            i = 0,
            def = matrix.replace(/\D/g, ""),
            val = this.value.replace(/\D/g, ""),
            new_value = matrix.replace(/[_\d]/g, function(a) {
                return i < val.length ? val.charAt(i++) || def.charAt(i) : a
            });
        i = new_value.indexOf("_");
        if (i != -1) {
            i < 5 && (i = 3);
            new_value = new_value.slice(0, i)
        }
        var reg = matrix.substr(0, this.value.length).replace(/_+/g,
            function(a) {
                return "\\d{1," + a.length + "}"
            }).replace(/[+()]/g, "\\$&");
        reg = new RegExp("^" + reg + "$");
        if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) this.value = new_value;
        if (event.type == "blur" && this.value.length < 5)  this.value = ""
    }

    input.addEventListener("input", mask, false);
    input.addEventListener("focus", mask, false);
    input.addEventListener("blur", mask, false);
    input.addEventListener("keydown", mask, false)

  });
});



    </script>

    <script>
    var box_to_display = document.getElementById('check_radio');
    var input_radio = document.getElementById('radio1');
    var input_radio_2 = document.getElementById('radio2');
    var all_input = document.querySelectorAll("input");
    $('#container').on('change', 'input[name="radio"]', function() {
        if (input_radio.checked){
            box_to_display.style.display = 'none';
            for( var i of all_input){
                $(i).prop("required", false);
                console.log(i);
            }
            $('[id^="base"]').prop("required", true);

        }
        if (input_radio_2.checked){
            box_to_display.style.display = 'block' ;
            for( var i of all_input){
                $(i).prop("required", true);
                console.log(i);
            }
        }

});

//меняем radio
$('input[name="radio"][value="1"]').prop('checked', true).trigger('change');
    </script>



{% endblock %}